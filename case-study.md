# Case-study оптимизации

## сравнение `HAR`-файлов с `server-push` и без

Отправной точкой работы над проектом стало создание локального корневого сертификата и подписывание им сертификата для localhost. Был установлен nginx, и произведена настройка HTTP2 с включением опции `server-push`.
Для совместимости с локальной системой была обновлена версия Ruby до 2.7.7.

После этого в файле `app/views/layouts/_top_bar.html.erb` были согласно заданию заменены `inline_svg` команды для ряда изображений на стандартный `image_tag`.

В итоге было запущено тестирование главной страницы сайта как с включенной предзагрузкой изображений через команды в заголовке, так и без этой опции.

Результаты были сопоставлены на сайте `https://compare.sitespeed.io/`.
По их результатам можно сделать следующие выводы:
* Для первой загрузки:
  * Без принудительной загрузки картинок время отображения страницы отставало: до первого появления элементов на странице прошло сравнительно одинаковое время 0.27-0.3 сек, однако эти же 0.3 сек позволили оптимизированной версии отрисовать страницу на 98%, когда без `server-push` на это потребовалось 0.43 сек.
* Для второй загрузки:
  * 0,34 секунды потребовалось версии без оптимизации для отрисовывания первых элементов и 0,4 сек для полной загрузки. Для версии с `server-push` это 0,27 и 0,33 сек соответственно.
* 9-27 мс против 20-43 мс составило время загрузки изображений, которые мы добавили в первоначальный ответ сервера, это видно в разделе `Waterfall` отчета.
